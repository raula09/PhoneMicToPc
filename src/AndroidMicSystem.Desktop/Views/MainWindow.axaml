<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AndroidMicSystem.Desktop.ViewModels"
        x:Class="AndroidMicSystem.Desktop.Views.MainWindow"
        Title="Android Microphone System"
        Width="500" Height="400">

  <Design.DataContext>
    <vm:MainViewModel/>
  </Design.DataContext>

  <Grid Margin="20" RowDefinitions="Auto,*,Auto">
    
    <StackPanel Grid.Row="0" Spacing="5" Margin="0,0,0,20">
      <TextBlock Text="Android Microphone System" 
                 FontSize="20" 
                 FontWeight="Bold"/>
      <TextBlock Text="Linux Desktop Receiver"
                 FontSize="12"
                 Foreground="Gray"/>
    </StackPanel>

    <ScrollViewer Grid.Row="1">
      <StackPanel Spacing="15">
        
        <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="15">
          <StackPanel Spacing="10">
            <TextBlock Text="Status" FontWeight="SemiBold" FontSize="14"/>
            <TextBlock Text="{Binding StatusMessage}" TextWrapping="Wrap"/>
          </StackPanel>
        </Border>

        <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="15">
          <StackPanel Spacing="8">
            <TextBlock Text="Audio Level" FontWeight="SemiBold" FontSize="14"/>
            <ProgressBar Value="{Binding AudioLevel}" 
                        Maximum="100" 
                        Height="25"
                        Foreground="Green"
                        ShowProgressText="True"/>
            <TextBlock Text="{Binding AudioLevel, StringFormat='Level: {0:F1}%'}" 
                      FontSize="12" 
                      Foreground="Gray"/>
          </StackPanel>
        </Border>

        <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="15">
          <StackPanel Spacing="5">
            <TextBlock Text="Statistics" FontWeight="SemiBold" FontSize="14"/>
            <TextBlock Text="{Binding PacketsReceived, StringFormat='Packets: {0}'}" FontSize="12"/>
            <TextBlock Text="{Binding BytesReceived, StringFormat='Bytes: {0}'}" FontSize="12"/>
          </StackPanel>
        </Border>

        <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
          <Button Content="Start Server" 
                  Command="{Binding StartServerCommand}"
                  IsEnabled="{Binding !IsServerRunning}"
                  Width="130"
                  Height="35"/>
          <Button Content="Stop Server" 
                  Command="{Binding StopServerCommand}"
                  IsEnabled="{Binding IsServerRunning}"
                  Width="130"
                  Height="35"/>
        </StackPanel>

      </StackPanel>
    </ScrollViewer>

    <Border Grid.Row="2" 
            Background="WhiteSmoke" 
            Padding="10" 
            CornerRadius="4"
            Margin="0,20,0,0">
      <TextBlock Text="Send audio to UDP port 5000"
                 FontSize="11"
                 Foreground="Gray"
                 TextAlignment="Center"/>
    </Border>

  </Grid>
</Window>
